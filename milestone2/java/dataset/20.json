{
  "repo": "ngageoint/geopackage-android",
  "path": "geopackage-sdk/src/main/java/mil/nga/geopackage/db/FeatureIndexer.java",
  "func_name": "FeatureIndexer.indexRows",
  "original_string": "private int indexRows(long geoPackageId, FeatureCursor cursor) {\n\n        int count = -1;\n\n        try {\n            while ((progress == null || progress.isActive())\n                    && cursor.moveToNext()) {\n                if (count < 0) {\n                    count++;\n                }\n                try {\n                    FeatureRow row = cursor.getRow();\n                    if (row.isValid()) {\n                        boolean indexed = index(geoPackageId, row, false);\n                        if (indexed) {\n                            count++;\n                        }\n                        if (progress != null) {\n                            progress.addProgress(1);\n                        }\n                    }\n                } catch (Exception e) {\n                    Log.e(FeatureIndexer.class.getSimpleName(), \"Failed to index feature. Table: \"\n                            + featureDao.getTableName() + \", Position: \" + cursor.getPosition(), e);\n                }\n            }\n        } finally {\n            cursor.close();\n        }\n\n        return count;\n    }",
  "language": "java",
  "code": "private int indexRows(long geoPackageId, FeatureCursor cursor) {\n\n        int count = -1;\n\n        try {\n            while ((progress == null || progress.isActive())\n                    && cursor.moveToNext()) {\n                if (count < 0) {\n                    count++;\n                }\n                try {\n                    FeatureRow row = cursor.getRow();\n                    if (row.isValid()) {\n                        boolean indexed = index(geoPackageId, row, false);\n                        if (indexed) {\n                            count++;\n                        }\n                        if (progress != null) {\n                            progress.addProgress(1);\n                        }\n                    }\n                } catch (Exception e) {\n                    Log.e(FeatureIndexer.class.getSimpleName(), \"Failed to index feature. Table: \"\n                            + featureDao.getTableName() + \", Position: \" + cursor.getPosition(), e);\n                }\n            }\n        } finally {\n            cursor.close();\n        }\n\n        return count;\n    }",
  "code_tokens": [
    "private",
    "int",
    "indexRows",
    "(",
    "long",
    "geoPackageId",
    ",",
    "FeatureCursor",
    "cursor",
    ")",
    "{",
    "int",
    "count",
    "=",
    "-",
    "1",
    ";",
    "try",
    "{",
    "while",
    "(",
    "(",
    "progress",
    "==",
    "null",
    "||",
    "progress",
    ".",
    "isActive",
    "(",
    ")",
    ")",
    "&&",
    "cursor",
    ".",
    "moveToNext",
    "(",
    ")",
    ")",
    "{",
    "if",
    "(",
    "count",
    "<",
    "0",
    ")",
    "{",
    "count",
    "++",
    ";",
    "}",
    "try",
    "{",
    "FeatureRow",
    "row",
    "=",
    "cursor",
    ".",
    "getRow",
    "(",
    ")",
    ";",
    "if",
    "(",
    "row",
    ".",
    "isValid",
    "(",
    ")",
    ")",
    "{",
    "boolean",
    "indexed",
    "=",
    "index",
    "(",
    "geoPackageId",
    ",",
    "row",
    ",",
    "false",
    ")",
    ";",
    "if",
    "(",
    "indexed",
    ")",
    "{",
    "count",
    "++",
    ";",
    "}",
    "if",
    "(",
    "progress",
    "!=",
    "null",
    ")",
    "{",
    "progress",
    ".",
    "addProgress",
    "(",
    "1",
    ")",
    ";",
    "}",
    "}",
    "}",
    "catch",
    "(",
    "Exception",
    "e",
    ")",
    "{",
    "Log",
    ".",
    "e",
    "(",
    "FeatureIndexer",
    ".",
    "class",
    ".",
    "getSimpleName",
    "(",
    ")",
    ",",
    "\"Failed to index feature. Table: \"",
    "+",
    "featureDao",
    ".",
    "getTableName",
    "(",
    ")",
    "+",
    "\", Position: \"",
    "+",
    "cursor",
    ".",
    "getPosition",
    "(",
    ")",
    ",",
    "e",
    ")",
    ";",
    "}",
    "}",
    "}",
    "finally",
    "{",
    "cursor",
    ".",
    "close",
    "(",
    ")",
    ";",
    "}",
    "return",
    "count",
    ";",
    "}"
  ],
  "docstring": "Index the feature rows in the cursor\n\n@param geoPackageId GeoPackage id\n@param cursor       feature cursor\n@return count, -1 if no results or canceled",
  "docstring_tokens": [
    "Index",
    "the",
    "feature",
    "rows",
    "in",
    "the",
    "cursor"
  ],
  "sha": "d19e9fcc636462c0f0ae1b7eca4acafae48de21b",
  "url": "https://github.com/ngageoint/geopackage-android/blob/d19e9fcc636462c0f0ae1b7eca4acafae48de21b/geopackage-sdk/src/main/java/mil/nga/geopackage/db/FeatureIndexer.java#L209-L240",
  "partition": "test"
}