{
  "repo": "oblac/jodd",
  "path": "jodd-core/src/main/java/jodd/util/Futures.java",
  "func_name": "Futures.failAfter",
  "original_string": "public static <T> CompletableFuture<T> failAfter(final long duration) {\n\t\tfinal CompletableFuture<T> promise = new CompletableFuture<>();\n\t\tSCHEDULER.schedule(() -> {\n\t\t\tfinal TimeoutException ex = new TimeoutException(\"Timeout after \" + duration);\n\t\t\treturn promise.completeExceptionally(ex);\n\t\t}, duration, MILLISECONDS);\n\t\treturn promise;\n\t}",
  "language": "java",
  "code": "public static <T> CompletableFuture<T> failAfter(final long duration) {\n\t\tfinal CompletableFuture<T> promise = new CompletableFuture<>();\n\t\tSCHEDULER.schedule(() -> {\n\t\t\tfinal TimeoutException ex = new TimeoutException(\"Timeout after \" + duration);\n\t\t\treturn promise.completeExceptionally(ex);\n\t\t}, duration, MILLISECONDS);\n\t\treturn promise;\n\t}",
  "code_tokens": [
    "public",
    "static",
    "<",
    "T",
    ">",
    "CompletableFuture",
    "<",
    "T",
    ">",
    "failAfter",
    "(",
    "final",
    "long",
    "duration",
    ")",
    "{",
    "final",
    "CompletableFuture",
    "<",
    "T",
    ">",
    "promise",
    "=",
    "new",
    "CompletableFuture",
    "<>",
    "(",
    ")",
    ";",
    "SCHEDULER",
    ".",
    "schedule",
    "(",
    "(",
    ")",
    "->",
    "{",
    "final",
    "TimeoutException",
    "ex",
    "=",
    "new",
    "TimeoutException",
    "(",
    "\"Timeout after \"",
    "+",
    "duration",
    ")",
    ";",
    "return",
    "promise",
    ".",
    "completeExceptionally",
    "(",
    "ex",
    ")",
    ";",
    "}",
    ",",
    "duration",
    ",",
    "MILLISECONDS",
    ")",
    ";",
    "return",
    "promise",
    ";",
    "}"
  ],
  "docstring": "Returns {@code CompletableFuture} that fails after certain number of milliseconds.",
  "docstring_tokens": [
    "Returns",
    "{"
  ],
  "sha": "85ad7f813ec0e07ecd27042aeb47ff2047631fa5",
  "url": "https://github.com/oblac/jodd/blob/85ad7f813ec0e07ecd27042aeb47ff2047631fa5/jodd-core/src/main/java/jodd/util/Futures.java#L56-L63",
  "partition": "test"
}