{
  "repo": "real-logic/aeron",
  "path": "aeron-driver/src/main/java/io/aeron/driver/PublicationImage.java",
  "func_name": "PublicationImage.hasActivityAndNotEndOfStream",
  "original_string": "boolean hasActivityAndNotEndOfStream(final long nowNs)\n    {\n        boolean isActive = true;\n\n        if (((lastPacketTimestampNs + imageLivenessTimeoutNs) - nowNs < 0) ||\n            (isEndOfStream && rebuildPosition.getVolatile() >= hwmPosition.get()))\n        {\n            isActive = false;\n        }\n\n        return isActive;\n    }",
  "language": "java",
  "code": "boolean hasActivityAndNotEndOfStream(final long nowNs)\n    {\n        boolean isActive = true;\n\n        if (((lastPacketTimestampNs + imageLivenessTimeoutNs) - nowNs < 0) ||\n            (isEndOfStream && rebuildPosition.getVolatile() >= hwmPosition.get()))\n        {\n            isActive = false;\n        }\n\n        return isActive;\n    }",
  "code_tokens": [
    "boolean",
    "hasActivityAndNotEndOfStream",
    "(",
    "final",
    "long",
    "nowNs",
    ")",
    "{",
    "boolean",
    "isActive",
    "=",
    "true",
    ";",
    "if",
    "(",
    "(",
    "(",
    "lastPacketTimestampNs",
    "+",
    "imageLivenessTimeoutNs",
    ")",
    "-",
    "nowNs",
    "<",
    "0",
    ")",
    "||",
    "(",
    "isEndOfStream",
    "&&",
    "rebuildPosition",
    ".",
    "getVolatile",
    "(",
    ")",
    ">=",
    "hwmPosition",
    ".",
    "get",
    "(",
    ")",
    ")",
    ")",
    "{",
    "isActive",
    "=",
    "false",
    ";",
    "}",
    "return",
    "isActive",
    ";",
    "}"
  ],
  "docstring": "To be called from the {@link Receiver} to see if a image should be retained.\n\n@param nowNs current time to check against for activity.\n@return true if the image should be retained otherwise false.",
  "docstring_tokens": [
    "To",
    "be",
    "called",
    "from",
    "the",
    "{",
    "@link",
    "Receiver",
    "}",
    "to",
    "see",
    "if",
    "a",
    "image",
    "should",
    "be",
    "retained",
    "."
  ],
  "sha": "045c32f0256d1ea35d562520216affc281a41239",
  "url": "https://github.com/real-logic/aeron/blob/045c32f0256d1ea35d562520216affc281a41239/aeron-driver/src/main/java/io/aeron/driver/PublicationImage.java#L583-L594",
  "partition": "test"
}