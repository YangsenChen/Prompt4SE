{
  "repo": "braintree/braintree_android",
  "path": "Braintree/src/main/java/com/braintreepayments/api/Venmo.java",
  "func_name": "Venmo.authorizeAccount",
  "original_string": "public static void authorizeAccount(final BraintreeFragment fragment, final boolean vault, final String profileId) {\n        fragment.waitForConfiguration(new ConfigurationListener() {\n            @Override\n            public void onConfigurationFetched(Configuration configuration) {\n                fragment.sendAnalyticsEvent(\"pay-with-venmo.selected\");\n\n                String venmoProfileId = profileId;\n                if (TextUtils.isEmpty(venmoProfileId)) {\n                    venmoProfileId = configuration.getPayWithVenmo().getMerchantId();\n                }\n\n                String exceptionMessage = \"\";\n                if (!configuration.getPayWithVenmo().isAccessTokenValid()) {\n                    exceptionMessage = \"Venmo is not enabled\";\n                } else if (!Venmo.isVenmoInstalled(fragment.getApplicationContext())) {\n                    exceptionMessage = \"Venmo is not installed\";\n                }\n\n                if (!TextUtils.isEmpty(exceptionMessage)) {\n                    fragment.postCallback(new AppSwitchNotAvailableException(exceptionMessage));\n                    fragment.sendAnalyticsEvent(\"pay-with-venmo.app-switch.failed\");\n                } else {\n                    persistVenmoVaultOption(vault && fragment.getAuthorization() instanceof ClientToken,\n                            fragment.getApplicationContext());\n\n                    fragment.startActivityForResult(getLaunchIntent(configuration.getPayWithVenmo(), venmoProfileId, fragment),\n                            BraintreeRequestCodes.VENMO);\n                    fragment.sendAnalyticsEvent(\"pay-with-venmo.app-switch.started\");\n                }\n            }\n        });\n    }",
  "language": "java",
  "code": "public static void authorizeAccount(final BraintreeFragment fragment, final boolean vault, final String profileId) {\n        fragment.waitForConfiguration(new ConfigurationListener() {\n            @Override\n            public void onConfigurationFetched(Configuration configuration) {\n                fragment.sendAnalyticsEvent(\"pay-with-venmo.selected\");\n\n                String venmoProfileId = profileId;\n                if (TextUtils.isEmpty(venmoProfileId)) {\n                    venmoProfileId = configuration.getPayWithVenmo().getMerchantId();\n                }\n\n                String exceptionMessage = \"\";\n                if (!configuration.getPayWithVenmo().isAccessTokenValid()) {\n                    exceptionMessage = \"Venmo is not enabled\";\n                } else if (!Venmo.isVenmoInstalled(fragment.getApplicationContext())) {\n                    exceptionMessage = \"Venmo is not installed\";\n                }\n\n                if (!TextUtils.isEmpty(exceptionMessage)) {\n                    fragment.postCallback(new AppSwitchNotAvailableException(exceptionMessage));\n                    fragment.sendAnalyticsEvent(\"pay-with-venmo.app-switch.failed\");\n                } else {\n                    persistVenmoVaultOption(vault && fragment.getAuthorization() instanceof ClientToken,\n                            fragment.getApplicationContext());\n\n                    fragment.startActivityForResult(getLaunchIntent(configuration.getPayWithVenmo(), venmoProfileId, fragment),\n                            BraintreeRequestCodes.VENMO);\n                    fragment.sendAnalyticsEvent(\"pay-with-venmo.app-switch.started\");\n                }\n            }\n        });\n    }",
  "code_tokens": [
    "public",
    "static",
    "void",
    "authorizeAccount",
    "(",
    "final",
    "BraintreeFragment",
    "fragment",
    ",",
    "final",
    "boolean",
    "vault",
    ",",
    "final",
    "String",
    "profileId",
    ")",
    "{",
    "fragment",
    ".",
    "waitForConfiguration",
    "(",
    "new",
    "ConfigurationListener",
    "(",
    ")",
    "{",
    "@",
    "Override",
    "public",
    "void",
    "onConfigurationFetched",
    "(",
    "Configuration",
    "configuration",
    ")",
    "{",
    "fragment",
    ".",
    "sendAnalyticsEvent",
    "(",
    "\"pay-with-venmo.selected\"",
    ")",
    ";",
    "String",
    "venmoProfileId",
    "=",
    "profileId",
    ";",
    "if",
    "(",
    "TextUtils",
    ".",
    "isEmpty",
    "(",
    "venmoProfileId",
    ")",
    ")",
    "{",
    "venmoProfileId",
    "=",
    "configuration",
    ".",
    "getPayWithVenmo",
    "(",
    ")",
    ".",
    "getMerchantId",
    "(",
    ")",
    ";",
    "}",
    "String",
    "exceptionMessage",
    "=",
    "\"\"",
    ";",
    "if",
    "(",
    "!",
    "configuration",
    ".",
    "getPayWithVenmo",
    "(",
    ")",
    ".",
    "isAccessTokenValid",
    "(",
    ")",
    ")",
    "{",
    "exceptionMessage",
    "=",
    "\"Venmo is not enabled\"",
    ";",
    "}",
    "else",
    "if",
    "(",
    "!",
    "Venmo",
    ".",
    "isVenmoInstalled",
    "(",
    "fragment",
    ".",
    "getApplicationContext",
    "(",
    ")",
    ")",
    ")",
    "{",
    "exceptionMessage",
    "=",
    "\"Venmo is not installed\"",
    ";",
    "}",
    "if",
    "(",
    "!",
    "TextUtils",
    ".",
    "isEmpty",
    "(",
    "exceptionMessage",
    ")",
    ")",
    "{",
    "fragment",
    ".",
    "postCallback",
    "(",
    "new",
    "AppSwitchNotAvailableException",
    "(",
    "exceptionMessage",
    ")",
    ")",
    ";",
    "fragment",
    ".",
    "sendAnalyticsEvent",
    "(",
    "\"pay-with-venmo.app-switch.failed\"",
    ")",
    ";",
    "}",
    "else",
    "{",
    "persistVenmoVaultOption",
    "(",
    "vault",
    "&&",
    "fragment",
    ".",
    "getAuthorization",
    "(",
    ")",
    "instanceof",
    "ClientToken",
    ",",
    "fragment",
    ".",
    "getApplicationContext",
    "(",
    ")",
    ")",
    ";",
    "fragment",
    ".",
    "startActivityForResult",
    "(",
    "getLaunchIntent",
    "(",
    "configuration",
    ".",
    "getPayWithVenmo",
    "(",
    ")",
    ",",
    "venmoProfileId",
    ",",
    "fragment",
    ")",
    ",",
    "BraintreeRequestCodes",
    ".",
    "VENMO",
    ")",
    ";",
    "fragment",
    ".",
    "sendAnalyticsEvent",
    "(",
    "\"pay-with-venmo.app-switch.started\"",
    ")",
    ";",
    "}",
    "}",
    "}",
    ")",
    ";",
    "}"
  ],
  "docstring": "Start the Pay With Venmo flow. This will app switch to the Venmo app.\n<p/>\nIf the Venmo app is not available, {@link AppSwitchNotAvailableException} will be sent to {@link\ncom.braintreepayments.api.interfaces.BraintreeErrorListener#onError(Exception)}.\n\n@param fragment {@link BraintreeFragment}\n@param vault If true, and you are using Client Token authorization with a customer ID, this payment method will\nbe added to your customer's vault. @see <a href=\"https://developers.braintreepayments.com/guides/authorization/overview\">our\ndocs on client authorization</a> for more info.\n@param profileId The Venmo profile ID to be used during payment authorization. Customers will see the business\nname and logo associated with this Venmo profile, and it will show up in the Venmo app as a \"Connected Merchant\".\nVenmo profile IDs can be found in the Braintree Control Panel. Passing `null` will use the default Venmo profile.",
  "docstring_tokens": [
    "Start",
    "the",
    "Pay",
    "With",
    "Venmo",
    "flow",
    ".",
    "This",
    "will",
    "app",
    "switch",
    "to",
    "the",
    "Venmo",
    "app",
    ".",
    "<p",
    "/",
    ">",
    "If",
    "the",
    "Venmo",
    "app",
    "is",
    "not",
    "available",
    "{",
    "@link",
    "AppSwitchNotAvailableException",
    "}",
    "will",
    "be",
    "sent",
    "to",
    "{",
    "@link",
    "com",
    ".",
    "braintreepayments",
    ".",
    "api",
    ".",
    "interfaces",
    ".",
    "BraintreeErrorListener#onError",
    "(",
    "Exception",
    ")",
    "}",
    "."
  ],
  "sha": "07b32e6fad73f9fb8432971b0e79fc8c94b11873",
  "url": "https://github.com/braintree/braintree_android/blob/07b32e6fad73f9fb8432971b0e79fc8c94b11873/Braintree/src/main/java/com/braintreepayments/api/Venmo.java#L114-L145",
  "partition": "test"
}